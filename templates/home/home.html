{% extends "base.html" %}

{% block content %}
	<div id="home_top">
		<div class="inner">
			<div class="row-fluid">
				<div class="span4">
					<div id="dagkot_home_carousel" class="carousel slide">
						<!-- Carousel items -->
						<div class="carousel-inner">
							<div class="active item">
								<img src="/images/slides/candle1.jpg" />
								<div class="carousel-caption">
									<p>To commemorate the life of your loved ones</p>
								</div>
							</div>
							<div class="item">
								<img src="/images/slides/candle2.jpg" />
								<div class="carousel-caption">
									<p>To give thanks for the graces and blessings</p>
								</div>
							</div>
							<div class="item">
								<img src="/images/slides/candle3.jpg" />
								<div class="carousel-caption">
									<p>To celebrate birthday</p>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="span8">
					<div class="hero-unit">
						<div class="home_dagkot_desc">
							<h2>Light a candle</h2>
							<p>In many traditions, lighting candles is a sacred ritual. It expresses more than words can describe. It has to do with gratefulness. From time immemorial, people have lit candles in sacred places. Why should cyberspace not be sacred?</p>
						</div>
						<div class="home_dagkot_form">
							<a href="{{ uri_for('add') }}" class="btn btn-large btn-primary">
								<i class="icon-plus icon-white"></i>
								Add New Dagkot
							</a>
							<!-- <form id="frm_dagkot_for" method="get" action="/add">
								<img id="img_dagkot_for" src="/images/candle-default.gif" />
								<div id="div_dagkot_for">
									<input type="text" name="txt_dagkot_for" id="txt_dagkot_for" placeholder="dagkot for..." />
								</div>
								<div id="btn_dagkot_add">
									<button class="btn btn-large btn-primary">
										<i class="icon-plus icon-white"></i>
										Add New Dagkot
									</button>
								</div>
								<div class="ClearBoth"></div>
							</form> -->
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
	
	<div class="row-fluid">
		<div class="span12">
			<ul id="dagkots" class="dagkots">
				{% for dagkot in dagkots %}
					<li class="dagkot">
						<div class="inner">
							{% if dagkot.dagkot_pictures %}
								<div class="hair">
									{% for pic in dagkot.get_pictures() %}
										<img src="{{ pic }}" />
									{% endfor %}
								</div>
							{% endif %}
							<div class="head">
								<div class="candle-container">
									{% with candle=dagkot.dagkot_candle %}
										<img class="candle" src="{{ candle.candle_path }}" alt="{{ candle.candle_name }}" />
									{% endwith %}
								</div>
								{{ dagkot.dagkot_type }} <strong>{{ dagkot.dagkot_for|title }}.</strong>
								<div class="ClearBoth"></div>
							</div>
							<div class="body">
								<pre>{{ dagkot.dagkot_message }}</pre>
							</div>
							<div class="foot">
								{% with author=dagkot.dagkot_author %}
									<div class="dagkot_author">
										from
										{% if author %}
											<strong>{{ author }}</strong>
										{% else %}
											<strong>Anonymous</strong>
										{% endif %}
									</div>
								{% endwith %}
								<div class="dagkot_date">
									{{ dagkot.dagkot_date.strftime('%b %d, %Y at %H:%M') }}
								</div>
							</div>
						</div>
					</li>
				{% else %}
					<li class="FloatLeft">No dagkots available.</li>
				{% endfor %}
			</ul>
			<div id="pagination">
				<a href="/dagkots/get?o=2">Next</a>
			</div>
		</div>
	</div>
{% endblock content %}

{% block body_extras %}
<!-- Bootstrap JS -->
<script type="text/javascript" src="/js/bootstrap/bootstrap-carousel.js"></script>
<!-- Bootstrap JS -->

<!-- Wookmark -->
<script type="text/javascript" src="/js/wookmark/infinitescroll.js"></script>
<script type="text/javascript" src="/js/wookmark/imagesloaded.js"></script>
<script type="text/javascript" src="/js/wookmark/wookmark.js"></script>
<script type="text/javascript" src="/js/wookmark/effects.js"></script>
<!-- Wookmark -->

<script type="text/javascript">
$(function() {
	$('.carousel').carousel();

	$('#dagkots').infinitescroll({
		navSelector    : '#pagination',
		nextSelector   : '#pagination a:first',
		itemSelector   : '#dagkots li.dagkot',
		dataType	   : 'html',
		debug		   : true
	}, function(dagkots) {
		var newdagkots = $(dagkots);

		newdagkots.css({
			'background-color': '#fff68f'
		});

		$(this).append(newdagkots);

		newdagkots.animate({ 
			backgroundColor: '#fff'
		}, 8000);

		$('#dagkots').imagesLoaded(function() {
			$('#dagkots li.dagkot').wookmark({
				autoResize: true,
				container: $('#dagkots'),
				offset: 10
			});
		});
	});
});

$('#dagkots').imagesLoaded(function() {
	$('#dagkots li.dagkot').wookmark({
		autoResize: true,
		container: $('#dagkots'),
		offset: 10
	});
});
</script>
{% endblock body_extras %}